((tags "egg") (section 2 "srfi-38" (toc) (section 3 "Description" (p "A Chicken version of the reference implementation for " (link "http://srfi.schemers.org/srfi-38/srfi-38.html" "SRFI-38") ", a facility for reading and writing objects with shared structure.")) (section 3 "Author" (p (int-link "Al Petrofsky") " and " (int-link "Ray Dillinger"))) (section 3 "Documentation" (p "See " (link "http://srfi.schemers.org/srfi-38/srfi-38.html" "SRFI-38 document") ".") (p "This implementation extends " (b "write-with-shared-structure") " to accept optional flags (following the optional port argument).") (p "Passing the keyword " (b "#:ignore-strings") " will treat strings as normal (nonshared) objects.") (p "The keyword " (b "#:interesting-procedures") " is followed by a list of three procedures:") (ul (li "interesting? : (object -> boolean)") (li "write-interesting : ((output-port -> object) output-port object association-list -> association-list)") (li "scan : ((object association-list -> association-list) object association-list -> association-list)")) (p "The " (b "interesting?") " procedure returns " (b "#t") " when the object can be processed, " (b "#f") " otherwise.") (p "All optional \"interesting objects\" are written as #<KIND-SYMBOL[OBJECT]...>. It is the job of " (b "write-interesting") " to display the " (b "KIND-SYMBOL") " and write any elements, using the first procedure, separated by " (b "#\\space") ". Writing the elements of the " (b "object") " as a list or vector is advised.") (p "The " (b "scan") " procedure must call the first procedure for every element of the " (b "object") ". The returned " (b "association-list") " is used for the next invocation. Returns the modified " (b "association-list") ".") (p "This implementation extends " (b "read-with-shared-structure") " to accept optional flags (following the optional port argument).") (p "The keyword " (b "#:interesting-procedures") " is followed by a list of three procedures:") (ul (li "interesting? : (object -> boolean)") (li "read-interesting : ((-> object) input-port symbol -> object)") (li "scan : ((object -> unspecified) (object -> object) object -> unspecified)")) (p "The " (b "interesting?") " procedure returns " (b "#t") " when the object can be processed, " (b "#f") " otherwise.") (p "The " (b "read-interesting") " procedure must use the first procedure to read any elements of the " (b "object") ". The " (b "symbol") " is the " (b "KIND-SYMBOL") ". The procedure should return " (b "#f") " for an unsuccessful operation, otherwise the reified object. The procedure must not consume the trailing " (b "#\\>") " but must exit positioned at the trailing " (b "#\\>") ". The " (b "input-port") " is positioned just after the " (b "KIND-SYMBOL") " upon invocation.") (p "The " (b "scan") " procedure must call the second procedure for every element of the " (b "object") " when the element is a procedure, otherwise it must call the first procedure with the element.")) (section 3 "Changelog" (ul (li "1.3 records & hash-tables are \"interesting\", #:interesting-procedures parameter [Kon Lovett]") (li "1.2 option for ignoring sharing of strings [suggested by Sven Hartrumpf]") (li "1.1 Initial release"))) (section 3 "License" (p "Copyright (C) Ray Dillinger 2003. All Rights Reserved.") (p "This document and translations of it may be copied and furnished to others, and derivative works that comment on or otherwise explain it or assist in its implementation may be prepared, copied, published and distributed, in whole or in part, without restriction of any kind, provided that the above copyright notice and this paragraph are included on all such copies and derivative works. However, this document itself may not be modified in any way, such as by removing the copyright notice or references to the Scheme Request For Implementation process or editors, except as needed for the purpose of developing SRFIs in which case the procedures for copyrights defined in the SRFI process must be followed, or as required to translate it into languages other than English.") (p "The limited permissions granted above are perpetual and will not be revoked by the authors or their successors or assigns.") (p "This document and the information contained herein is provided on an \"AS IS\" basis and THE AUTHOR AND THE SRFI EDITORS DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE."))))