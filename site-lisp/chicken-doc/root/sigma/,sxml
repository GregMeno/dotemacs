((tags "egg") (section 2 "sigma" (p "Image gallery generator.") (toc)) (section 2 "Usage" (p "sigma [options...] [commands...]")) (section 2 "Documentation" (p (tt "sigma") " is a simple program for creating a Web gallery of images with a single command. It is based on the igal program by Eric Pop and generates a set of HTML 4.0+CSS-compliant static slides.  The appearance of the image gallery can be altered by modifying the default CSS file, as well as the slide template and index page template files that appear in the image directory. Unlike igal, the templates are written as S-expressions, and follow the conventions of SXML.") (p (tt "sigma") " also checks for the existence of a $HOME/.sigma directory where users can store their own templates, overriding the site-wide " (tt "/usr/share/sigma") ".") (p (tt "sigma") " relies on the ImageMagick package, and if sorting by image date is desired, it can use the " (tt "exif") " program to extract EXIF date information from JPEG files.") (p "The " (tt "convert") " command from the ImageMagick package is required to process image files and the " (tt "identify") " command enables " (tt "sigma") " to include size information in the HTML it generates and to determine whether large images need to be rescaled.") (p "If the -c option is used, " (tt "sigma") " creates a " (tt ".captions") " file, which contains captions to be inserted under each slide. The captions must be in S-expression format and may include SXML tags. Each caption entry can be in one of two forms:") (ul (li (tt "(fname caption [option1 option2 ...])") " The first element is the image file name, and the second element is the caption. The file name and the caption are required. They can be followed by any number of options keywords. The only option keyword currently recognized is " (tt "hl") ", which  indicates that the slide should be included on the optional highlights page.") (li (tt "(subdir name caption) ") " Entries of this form  be used to specify captions for subfolders.")) (p "To add any comments to this file or to exclude any images from the slide show, add a semicolon the beginning of their respective lines. You may also change the order of images in your slide show at this time.") (section 3 "Commands" (table (@ (class "symbol-table")) (tr (td "gallery") (td "Create an image gallery (default if no command given)")) "\n" (tr (td "thumbs") (td "Create image thumbnails (implicit when gallery is also given)")) "\n" (tr (td "sort") (td "Sort images by EXIF date or file creation date")) "\n" (tr (td "cdimage") (td "Create a CD image containing the image slides")) "\n" (tr (td "clean") (td "Clean generated files")))) (section 3 "Options" (table (@ (class "symbol-table")) (tr (td "-a") (td "write image sizes under thumbnails on index page")) "\n" (tr (td "-c") (td "first generate and then use captions")) "\n" (tr (td "-C") (td "like -c, but preserve file names as captions")) "\n" (tr (td "-d DIR") (td "operate on files in directory DIR (default: .)")) "\n" (tr (td "-f") (td "force thumbnail regeneration and scaled slides")) "\n" (tr (td "-g TITLE") (td "gallery title (default: Default Gallery Title)")) "\n" (tr (td "-k") (td "use the image captions for the HTML slide titles")) "\n" (tr (td "-R") (td "recursively descend subdirectories")) "\n" (tr (td "-t DIR") (td "place gallery files in directory DIR (will be created if it doesn't exist)")) "\n" (tr (td "-u") (td "write captions under thumbnails on index page")) "\n" (tr (td "-U") (td "write slide names under thumbnails on index page")) "\n" (tr (td "-x") (td "omit the image count from the captions")) "\n" (tr (td "-y N") (td "scale all thumbnails to the same height  (default: 75)")) "\n" (tr (td "--ad") (td "like -a, but write only the image dimensions")) "\n" (tr (td "--as") (td "like -a, but write only the file size (in kbytes)")) "\n" (tr (td "--author=AUTHOR") (td "specify author name (default: $USER)")) "\n" (tr (td "--con=OPTS") (td "options to pass to " (tt "convert"))) "\n" (tr (td "--cd-dir=DIR") (td "directory for CD image output (default: $HOME/tmp)")) "\n" (tr (td "--cd-file=DIR") (td "name of CD image file if --gcd is not specified (default: Photos)")) "\n" (tr (td "--gcd=TITLE") (td "like -g, but also sets CD image file name")) "\n" (tr (td "--hls") (td "creates a highlights page")) "\n" (tr (td "--hls-main") (td "creates a highlights page as the main page")) "\n" (tr (td "--html-ext=SUFFIX") (td "suffix of output HTML files (default: html)")) "\n" (tr (td "--index=NAME") (td "name (without suffix) of the main thumbnail index file (default: index)")) "\n" (tr (td "--hindex=NAME") (td "name (without suffix) of the highlights index file (default: hindex)")) "\n" (tr (td "--in") (td "use image file names for the HTML slide files")) "\n" (tr (td "--top") (td "create index pages for directories that only contain subfolders")) "\n" (tr (td "--tp=PREFIX") (td "sets the thumbnail image prefix (default: .thumb_)")) "\n" (tr (td "--sp=PREFIX") (td "sets the slide image prefix (default: .slide_)")) "\n" (tr (td "--up") (td "create Up links even in top-level image galleries")) "\n" (tr (td "--verbose=LEVEL") (td "set verbose mode (0: quiet; 1: info; 2: debug)")) "\n" (tr (td "--www") (td "makes all SIGMA files world-readable")) "\n" (tr (td "--xy=N") (td "scale thumbnails to N pixels in their longer dimension")) "\n" (tr (td "--yslide=N") (td "scale slides to the given maximum height")) "\n" (tr (td "--output-html") (td "output gallery files in HTML format (default)")) "\n" (tr (td "--html-ext=SUFFIX") (td "suffix of output HTML files (default: html)")) "\n" (tr (td "--output-wiki") (td "output gallery files in wiki format")) "\n" (tr (td "--wiki-ext=SUFFIX") (td "suffix of output wiki files (default: wiki)")) "\n" (tr (td "-h, --help") (td "print help")))) (section 3 "Files" (table (@ (class "symbol-table")) (tr (td "/usr/share/sigma/index-template.scm") (td "The default index template file.")) "\n" (tr (td "/usr/share/sigma/slide-template.scm") (td "The default slide template file.")) "\n" (tr (td "/usr/share/sigma/sigma.css") (td "The default style sheet."))) (p (tt "sigma") " also checks for the existence of a " (tt "$HOME/.sigma") " directory where the user can store their own templates, overriding the site-wide " (tt "/usr/share/sigma") "."))) (section 2 "Examples" (pre "\n  ## Creates an image gallery using the image files \n  ## found in the current directory and its subdirectories;\n  ## uses directory album to write the HTML files and slides;\n  ## writes image sizes and captions under the thumbnails on the index pages;\n  ## creates and reads .captions file; resizes the slide images to a maximum\n  ## height of 500 pixels\n\n  sigma -a -c -u -R --yslide=500 -t album  \n\n")) (section 2 "About this egg" (section 3 "Author" (p (int-link "/users/ivan-raikov" "Ivan Raikov"))) (section 3 "Version history" (dl (dt "2.2") (dd "Using installation-chicken-home to install template files") (dt "2.1") (dd "Added regex as a dependency") (dt "2.00") (dd "Added functionality for generation of gallery files in wiki format") (dt "1.23") (dd "Prevent empty \"next\" links from being created (thanks to Christian Kellerman and Snader_LB)") (dt "1.22") (dd "Bug fix in the handling of option cd-dir (thanks to Christian Kellerman); switched to using wiki documentation") (dt "1.21") (dd "Bug fix in default command-line options handling") (dt "1.20") (dd "Command-line handling converted to using getopt-long") (dt "1.19") (dd "Bug fix in command-line handling") (dt "1.18") (dd "Bug fix in filter-subfolders") (dt "1.17") (dd "Ported to Chicken 4"))) (section 3 "Requirements" (ul (li (int-link "getopt-long")) (li (int-link "sxml-transforms") ", ") (li (int-link "utf8")) (li (int-link "uri-generic")) (li (int-link "fmt")) (li (int-link "matchable")) (li (int-link "regex")))) (section 3 "License" (pre "Copyright 2007-2010 Ivan Raikov.\n\nBased on the igal program by Eric Pop.  \nISO 9660 image creation code based on code by Walter C. Pelissero.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or (at\nyour option) any later version.\n\nThis program is distributed in the hope that it will be useful, but\nWITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\nGeneral Public License for more details.\n\nA full copy of the GPL license can be found at\n<http://www.gnu.org/licenses/>."))))