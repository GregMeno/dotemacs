(index ("textdomain" 0) ("gettext" 0) ("dgettext" 1695) ("dcgettext" 1695) ("dngettext" 1695) ("dcngettext" 1695) ("bindtextdomain" 2284) ("make-gettext" 2428))
(def (sig (procedure "(textdomain [<name>])" (id textdomain)) (procedure "(gettext <message>)" (id gettext))) (highlight scheme "(use free-gettext)\n(textdomain \"myapp\")\n(print (gettext \"Hello, world!\"))") (p "The above is the most basic usage and is equivalent to the GNU gettext module.  TEXTDOMAIN sets the name of the current \"domain\", which is the name of the message catalog (typically the name of the application).  With no arguments it returns the name of that domain. GETTEXT then fetches the translation of the message in that domain in the current locale (from the LANG environment variable), or returns the original string if the message can't be found.") (p "Apart from actually creating the message files (which you can put off indefinitely), that's all you need to internationalize your message strings.  Since every natural language string needs to be translated, a common idiom is to give a short name to GETTEXT:") (highlight scheme "(define _ gettext)\n(print (_\"Hello, world!\"))") (p "Alternately, you could make , a prefix for all message strings:") (highlight scheme "(define-syntax unquote\n  (syntax-rules ()\n    ((_ str) (gettext str))))\n\n(print ,\"Hello, world!\")") (p "Note that free-gettext converts all strings to utf8 internally, to work best with the utf8 egg and other eggs which assume Chicken strings are utf8.  This is a feature - all strings are consistently the same encoding, and you don't need to create separate message files for every different encoding a user might want.  Many GUI toolkits like Gtk also assume utf8.  On the other hand, if you want to output text to a non-utf8 terminal you'll need to perform the translation manually."))
(def (sig (procedure "(dgettext <domain> <message>)" (id dgettext)) (procedure "(dcgettext <domain> <message> <locale>)" (id dcgettext)) (procedure "(dngettext <domain> <msg-singular> <msg-plural> <n>)" (id dngettext)) (procedure "(dcngettext <domain> <msg-singular> <msg-plural> <n> <locale>)" (id dcngettext))) (p "These let you lookup messages in domains other than that specified by TEXTDOMAIN.  This is just a clumsy way to make up for inadequacies in the traditional gettext design - if you want to work with multiple domains, you should use the cascaded domains described below."))
(def (sig (procedure "(bindtextdomain <domain> <dirname>)" (id bindtextdomain))) (p "Override the directory to look for the given domain in."))
(def (sig (procedure "(make-gettext domain [locale] [dirs] [cdir] [cached?] [lookup-cached?])" (id make-gettext))) (p "DOMAIN is the same as the first argument to TEXTDOMAIN, and may be similarly cascaded.") (p "LOCALE is the locale, as a string or list of strings of the form LANG[_REGION][.ENCODING], and defaults to the LANG or LC_ALL environment variable, or C if neither is set.  Multiple locales are also searched in order, which can be useful when you have incomplete translations in similar languages.") (p "DIRS (again a string or list of strings) is the search path of directories which should hold the LOCALE/CDIR/ directories which contain the actual message catalogs.  This is always appended with the system default, e.g.  \"/usr/share/locale\", and may also inherit from the GETTEXT_PATH colon-delimited environment variable.") (p "CDIR is the catagory directory, defaulting to either the LC_CATEGORY environment variable or the appropriate system default (e.g. LC_MESSAGES).  You generally won't need to specify this.") (p "CACHED? means to cache individual messages, and defaults to #t. This is a natural default (GNU gettext similarly caches messages), but during development it can be handy to disable caching if you intend to edit messages while coding.") (p "LOOKUP-CACHED? means to cache the lookup dispatch generated by these parameters, and defaults to #t.  Thus by default multiple calls to MAKE-GETTEXT with the same parameters return the same object, and they in turn share the same message cache.") (p "MAKE-GETTEXT returns a dispatch closure with the following parameters:"))
