((tags "egg") (toc) (section 2 "isbn" (section 3 "Introduction" (p (tt "isbn") " provides utilities for handling international standard book numbers.  The " (tt "isbn") " egg consists of two modules: " (tt "isbn") " for validating isbns and " (tt "isbndb") " for querying the database at " (link "http://isbndb.com") ". For this you need to provide an api key which is free of charge:") (p (i "In line with the long term vision of the ISBNdb.com project the access to the data from individuals should be free of charge. In reality, this is extended to even broader range of application -- as long as the application does not send an excessive amount of requests and meets our pretty liberal terms and conditions -- most uses are OK, individual, research or commercial. ") " " (link "https://isbndb.com/docs/api/30-keys.html" "source")) (p "Starting with version 0.3 of this egg, the open and free api of " (link "http://openlibrary.org") " is also supported. Advantages over isbndb are: No need for an API key, more detailed results plus links to cover images.")) (section 3 "Usage" (p "All modules can be loaded optionally. Note that the openlibrary needs normalized ISBNs to work with.") (highlight scheme "(require-extension isbn)\n(require-extension isbndb)\n(require-extension openlibrary)")) (section 3 "Requirements" (p (int-link "intarweb") " " (int-link "http-client") " " (int-link "ssax") " " (int-link "sxml-transforms") " " (int-link "sxpath") " sxpath-lolevel  " (int-link "uri-common"))) (section 3 "Documentation" (section 4 "isbn module" (section 5 "normalize-isbn" (def (sig (procedure "(normalize-isbn STRING)" (id normalize-isbn))) (p "Reduces the ISBN string to the allowed \"compressed\" format without spaces or dashes as separators."))) (section 5 "valid-isbn?" (def (sig (procedure "(valid-isbn? STRING)" (id valid-isbn?))) (p "Checks ISBN-10 and ISBN-13 numbers by normalizing them and running the checksums agains the numbers."))) (section 5 "isbn10->isbn13" (def (sig (procedure "(isbn10->isbn13 STRING)" (id isbn10->isbn13))) (p "Converts a ISBN-10 number to the EAN compatible ISBN-13 format. Returns a dash separated string or #f on error. This function has been added with version 0.2 of this egg."))) (section 5 "isbn-type" (def (sig (procedure "(isbn-type STRING)" (id isbn-type))) (p "Returns 10 for ISBN-10 and 13 for ISBN-13 numbers or #f if no valid number has been given. This function has been added with version 0.2 of this egg."))) (section 5 "Example" (highlight scheme "#;1> (normalize-isbn \"978-3854523871\")\n\"9783854523871\"\n#;2> (valid-isbn? \"978-3854523871\")\n#t"))) (section 4 "isbndb" (section 5 "Parameters: The API key & DB base URL" (def (sig (parameter "(api-key STRING)" (id api-key))) (p "The isbndb web api requires you to register on the site to aquire a database key. Registration is instant and can be done " (link "https://isbndb.com/account/create.html" "here") ".")) (def (sig (parameter "(database-url STRING)" (id database-url))) (p "URL of the base API URL, in case this should ever change. Default: http://isbndb.com."))) (section 5 "isbn->alist" (def (sig (procedure "(isbn->alist STRING)" (id isbn->alist))) (p "Queries the isdndb for an entry belonging to the ISBN string. No ISBN validation is done at this stage. Returns an alist containing title, authors, subtitle, publisher. Returns an empty list if no entry could be found."))) (section 5 "isbndb Example" (highlight scheme "#;1> (isbn->alist \"978-0262011532\")\n(((title . \"Structure and interpretation of computer programs\")\n  (authors\n    (\"Harold Abelson and Gerald Jay Sussman, with Julie Sussman; foreword by Alan J. Perlis\"))\n  (publisher \"Cambridge, Mass. : MIT Press ; c1996.\")))"))) (section 4 "openlibrary" (section 5 "Parameters: Database URL" (def (sig (parameter "(database-url STRING)" (id database-url))) (p "URL of the base API for openlibrary.org. Default: http://openlibrary.org/"))) (section 5 "available-keys" (p "Descripes the available keys this module supports.") (highlight scheme "(define-constant user-keys\n    '(title \n      authors\n      publisher\n      publishing-date\n      number-of-pages\n      cover-urls\n      isbn-numbers))\n\n;exported is this\n(define available-keys user-keys)")) (section 5 "isbn->alist" (def (sig (procedure "(isbn->alist STRING #!optional (interesting-entries))" (id isbn->alist))) (p "Queries openlibrary.org for an ISBN. It seems that you need to give it a normalized ISBN to make it work. " (b "interesting-entries") " is an optional parameter that can be a subset of the " (b "user-keys") " list. Defaults to " (b "user-keys") ": title, authors, publisher, publishing-date, number-of-pages, cover-urls, isbn-numbers"))) (section 5 "Openlibrary Example" (highlight scheme "#;1> (use openlibrary)\n\n#;2> (pp (isbn->alist \"0937073806\"))\n ((title . \"Literate programming\")\n (authors (\"Donald Knuth\"))\n (publisher (\"Center for the Study of Language and Information\"))\n (publishing-date . \"1992\")\n (number-of-pages . 368)\n (cover-urls\n   (\"small\" . \"http://covers.openlibrary.org/b/id/715228-S.jpg\")\n   (\"large\" . \"http://covers.openlibrary.org/b/id/715228-L.jpg\")\n   (\"medium\" . \"http://covers.openlibrary.org/b/id/715228-M.jpg\"))\n (isbn-numbers ((\"0937073806\" \"0937073814\"))))\n\n#;3> (pp (isbn->alist \"0937073806\" '(title authors publishing-date)))\n((title . \"Literate programming\")\n (authors (\"Donald Knuth\"))\n (publishing-date . \"1992\"))")))) (section 3 "Author" (p (int-link "/users/christian kellermann" "Christian Kellermann"))) (section 3 "License" (pre "Copyright (c) 2010, Christian Kellermann\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions\nare met:\n1. Redistributions of source code must retain the above copyright\n   notice, this list of conditions and the following disclaimer.\n2. Redistributions in binary form must reproduce the above copyright\n   notice, this list of conditions and the following disclaimer in the\n   documentation and/or other materials provided with the distribution.\n3. The name of the authors may not be used to endorse or promote products\n   derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE AUTHORS ``AS IS'' AND ANY EXPRESS OR\nIMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\nOF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\nIN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY DIRECT, INDIRECT,\nINCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\nNOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\nTHIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n ")) (section 3 "Version History" (dl (dt "0.1") (dd "initial release") (dt "0.2") (dd "isbn 10 -> 13 conversion added thanks to " (link "http://wiki.call-cc.org/users/alaric-blagrave-snellpym" "Alaric Snell-Pym")) (dt "0.3") (dd "support for openlibrary.org API added")))))