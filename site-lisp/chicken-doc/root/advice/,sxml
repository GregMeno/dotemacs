((tags "egg") (section 2 "Introduction" (p "The " (tt "advice") " extensions allows modifying the behaviour of existing procedures by specifying code that should run before, after or instead of the original procedure.")) (section 2 "Usage" (def (sig (procedure "(advise MODE PROCEDURE ADVISOR [ID])" (id advise))) (p "Adds a \"piece of advice\" to " (tt "PROCEDURE") ". Depending on " (tt "MODE") ", do any of the following:") (ul (li "if " (tt "MODE") " is the symbol " (tt "before") ", every call to " (tt "PROCEDURE") " will invoke the procedure " (tt "ADVISOR") " with a list of the arguments passed to " (tt "PROCEDURE") " before the original procedure is executed.") (li "if " (tt "MODE") " is the symbol " (tt "after") ", every call to " (tt "PROCEDURE") " will invoke the procedure " (tt "ADVISOR") " with a list of the arguments passed to " (tt "PROCEDURE") " after the original procedure is executed.") (li "if " (tt "MODE") " is the symbol " (tt "around") ", every call to " (tt "PROCEDURE") " will invoke the procedure " (tt "ADVISOR") " with the next \"inner\" " (tt "around") " advisor procedure (or the original procedure, if no other " (tt "around") " advice is defined or remaining) and a list of the arguments passed to " (tt "PROCEDURE") ".")) (p (tt "before") " advice-procedures are invoked in the reverse order: the most recently added advisor runs first. " (tt "after") " advice-procedures are invoked in the order in which they are added, the most recent one running last. The most recently added " (tt "around") " advice-procedures is called with the next \"inner\" advice procedure passed as argument.") (p "The procedure passed as first argument to " (tt "around") " advisors takes its arguments in the same manner as the original procedure.") (p (tt "advise") " returns an " (tt "ID") " that can be used to identify a particular piece of advice. If no ID was given, one will be generated.")) (def (sig (procedure "(unadvise PROCEDURE [ID [MODE]])" (id unadvise))) (p "Removes advice from an advised procedure. Advice can be removed completely (no ID or mode given). Specific pieces of advice can be removed by passing the advice-ID (as returned by " (tt "advice") "). Alternatively advice for a given mode (" (tt "before") ", " (tt "after") " or " (tt "around") ") can be removed (by passing " (tt "#f") " as the " (tt "ID") " argument)."))) (section 2 "Authors" (p (int-link "/users/felix winkelmann" "felix winkelmann"))) (section 2 "Version" (dl (dt "0.2") (dd "ported to CHICKEN 4") (dt "0.1") (dd "Initial version"))) (section 2 "License" (pre "Copyright (c) 2007, Felix L. Winkelmann\nAll rights reserved.") (pre "Redistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are met:") (pre "  Redistributions of source code must retain the above copyright notice,\n    this list of conditions and the following disclaimer.\n  Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the\n    documentation and/or other materials provided with the distribution.\n  Neither the name of the author nor the names of its contributors may be\n    used to endorse or promote products derived from this software without\n    specific prior written permission.") (pre "THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\nAND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\nIMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\nARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDERS OR CONTRIBUTORS BE\nLIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\nCONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\nSUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\nINTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\nCONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\nARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\nPOSSIBILITY OF SUCH DAMAGE.")))